<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>

    <link rel="stylesheet" href="./font/Gilroy/stylesheet.css">
    <link rel="stylesheet" href="./css/login.css?767543">

    <script src="./js/jquery-3.5.1.min.js"></script>
</head>
<body>
    <div class="login-page">
        <div class="header">
            <div class="logo">
                <img src="./img/logo-pool.svg" alt="Pool">
            </div>
        </div>
        <div class="interests-content">
            <div class="login-header">
                Давайте определим, что вам нравится
            </div>
            <div class="login-header-2">
                Чтобы мы знали, какие темы опросов предлагать
            </div>
            <form action="./interests_monthly.html">
                <div class="interests-list">
                    <div class="interest-item">
                        <input type="checkbox" name="q-1" id="q-1" value="Путешествия" data-id="1">
                        <label for="q-1">
                            <div class="icon"></div>
                            <div class="name">
                                Путешествия
                            </div>
                        </label>
                    </div>
                    <div class="interest-item">
                        <input type="checkbox" name="q-2" id="q-2" value="Медицина" data-id="2">
                        <label for="q-2">
                            <div class="icon"></div>
                            <div class="name">
                                Медицина
                            </div>
                        </label>
                    </div>
                    <div class="interest-item">
                        <input type="checkbox" name="q-3" id="q-3" value="Животные" data-id="3">
                        <label for="q-3">
                            <div class="icon"></div>
                            <div class="name">
                                Животные
                            </div>
                        </label>
                    </div>
                    <div class="interest-item">
                        <input type="checkbox" name="q-4" id="q-4" value="Кино" data-id="4">
                        <label for="q-4">
                            <div class="icon"></div>
                            <div class="name">
                                Кино
                            </div>
                        </label>
                    </div>
                    <div class="interest-item">
                        <input type="checkbox" name="q-5" id="q-5" value="Дети"  data-id="5">
                        <label for="q-5">
                            <div class="icon"></div>
                            <div class="name">
                                Дети
                            </div>
                        </label>
                    </div>
                    <div class="interest-item">
                        <input type="checkbox" name="q-6" id="q-6" value="Красота"  data-id="6">
                        <label for="q-6">
                            <div class="icon"></div>
                            <div class="name">
                                Красота
                            </div>
                        </label>
                    </div>
                    <div class="interest-item">
                        <input type="checkbox" name="q-7" id="q-7" value="Досуг"  data-id="7">
                        <label for="q-7">
                            <div class="icon"></div>
                            <div class="name">
                                Досуг
                            </div>
                        </label>
                    </div>
                    <div class="interest-item">
                        <input type="checkbox" name="q-8" id="q-8" value="Еда"  data-id="8">
                        <label for="q-8">
                            <div class="icon"></div>
                            <div class="name">
                                Еда
                            </div>
                        </label>
                    </div>
                    <div class="interest-item show-more">
                        <div class="item-label">
                            <div class="icon"></div>
                            <div class="name">
                                Еще
                            </div>
                        </div>
                    </div>
                </div>
                <div class="btns-cont">
                    <div class="btn-cont">
                        <button type="submit" class="btn-submit">
                            Начать
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="load-wrapper">
        <div class="loader"></div>
    </div>
    <script src="./js/login.js?35235"></script>
    <script>
        let moreInterests = [
            {
                name: "Столовые",
                id: 9,
            },
            {
                name: "Кофейни",
                id: 10,
            },
            {
                name: "Рестораны",
                id: 11,
            },
            {
                name: "Кафе",
                id: 12,
            },
            {
                name: "Дети",
                id: 13,
            },
            {
                name: "Красота",
                id: 14,
            },
            {
                name: "Еда",
                id: 15,
            },
            {
                name: "Медицина",
                id: 16,
            },
        ];
        let subCategories = [
            {
                idParent: 1,
                categories: [
                    {
                        name: "Автомобили",
                        id: 17
                    },
                    {
                        name: "Горы",
                        id: 18  
                    },
                    {
                        name: "Архитектура",
                        id: 19  
                    },
                    {
                        name: "ЖД транспорт",
                        id: 33  
                    },
                    {
                        name: "Отдых",
                        id: 34  
                    },
                    {
                        name: "Аквапарки",
                        id: 35  
                    },
                    {
                        name: "Велопрогулки",
                        id: 36  
                    }
                ]
            }, {
                idParent: 2,
                categories: [
                    {
                        name: "Психология",
                        id: 21
                    },
                    {
                        name: "Иммунология‎",
                        id: 22  
                    },
                ]
            }, {
                idParent: 3,
                categories: [
                    {
                        name: "Дикие животные",
                        id: 23
                    },
                    {
                        name: "Домашние животные",
                        id: 24  
                    },
                ]
            }, {
                idParent: 4,
                categories: [
                    {
                        name: "Триллер",
                        id: 25
                    },
                    {
                        name: "Кинокомедия",
                        id: 26  
                    },
                ]
            }, {
                idParent: 6,
                categories: [
                    {
                        name: "Уходовая косметика",
                        id: 27
                    },
                    {
                        name: "Декоративная косметика",
                        id: 28  
                    },
                ]
            }, {
                idParent: 7,
                categories: [
                    {
                        name: "Книги",
                        id: 29
                    },
                    {
                        name: "Спорт",
                        id: 30  
                    },
                ]
            }, {
                idParent: 8,
                categories: [
                    {
                        name: "Кофейни",
                        id: 31
                    },
                    {
                        name: "Рестораны",
                        id: 32  
                    },
                ]
            }
        ];
        $('.interests-content').on('change', '.interest-item input', function(e){
            if(subCategories.length > 0) {
                let id = parseInt($(this).attr('data-id'));
                let subCategoryArray = subCategories.filter(obj => {
                    return obj.idParent === id;
                });
                if(subCategoryArray.length > 0) {
                    let newCategories = subCategoryArray[0].categories;
                    let addHtml = ""
                    let i;
                    for (i = 0; i < newCategories.length; i++) {
                        if(i === 8) {
                            break;
                        }
                        addHtml += 
                        '<div class="interest-item">'
                        +'    <input type="checkbox" name="q-' + newCategories[i].id + '" id="q-' + newCategories[i].id + '"'
                        +'     value="' + newCategories[i].name + '"  data-id="' + newCategories[i].id + '">'
                        +'  <label for="q-' + newCategories[i].id + '">'
                        +'        <div class="icon"></div>'
                        +'       <div class="name">'
                        + newCategories[i].name
                        +'        </div>'
                        +'    </label>'
                        +'</div>';
                    }
                    $(addHtml).insertAfter($(this).parents('.interest-item'));
                    subCategories.splice(subCategories.findIndex(obj => obj.idParent === id),1);
                }
            }
        });
        $('.show-more').click(function(e){
            let addHtml = ""
            let i;
            for (i = 0; i < moreInterests.length; i++) {
                if(i === 8) {
                    break;
                }
                addHtml += 
                '<div class="interest-item">'
                +'    <input type="checkbox" name="q-' + moreInterests[i].id + '" id="q-' + moreInterests[i].id + '"'
                +'     value="' + moreInterests[i].name + '"  data-id="' + moreInterests[i].id + '">'
                +'  <label for="q-' + moreInterests[i].id + '">'
                +'        <div class="icon"></div>'
                +'       <div class="name">'
                + moreInterests[i].name
                +'        </div>'
                +'    </label>'
                +'</div>';
            }
            moreInterests.splice(0,i);
            $(addHtml).insertBefore($(this));
            if(moreInterests.length === 0){
                $(this).fadeOut(0);
            }
        });
    </script>
</body>
</html>